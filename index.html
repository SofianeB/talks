<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Jupyter* @ DKRZ</title>

<meta name="description" content="">
<meta name="author" content="Sofiane Bendoukha">
<meta name="generator" content="reveal-ck 4.0.0">



<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">


<!-- Code syntax highlighting -->
<link rel="stylesheet" href="reveal.js/dist/reset.css">
<link rel="stylesheet" href="reveal.js/dist/reveal.css">
<link rel="stylesheet" href="reveal.js/dist/theme/serif.css" id="theme">

<!-- Theme used for syntax highlighting of code -->
<link rel="stylesheet" href="reveal.js/plugin/highlight/monokai.css">

<!--<link rel="stylesheet" href="css/reveal-ck.css">-->


<!-- Printing and PDF exports -->
<script>
  var link = document.createElement( 'link' );
  link.rel = 'stylesheet';
  link.type = 'text/css';
  link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.scss' : 'reveal.js/css/print/paper.scss';
  document.getElementsByTagName( 'head' )[0].appendChild( link );
</script>

  </head>

  <body>
    <div class="reveal">
  <div class="slides">
    <section>

<h2>Jupyter * @ DKRZ</h2>
<h4>Interactive (Super) computing on Mistral</h4>

<table>
  <tbody>
    <tr>
      <td><img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse2.mm.bing.net%2Fth%3Fid%3DOIP.0M_91eDCRFzB_uknOBVKdAHaDn%26pid%3DApi&amp;f=1" style="border:none;" width="320"></td>
      <td><img src="https://jupyterhub.readthedocs.io/en/stable/_static/logo.png" alt="" width="470" style="border:none"></td>
    </tr>
  </tbody>
</table>

<p><strong>Sofiane Bendoukha</strong></p>

<p>Deutsches Klimarechenzentrum (DKRZ)</p>

<p><img src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="http://creativecommons.org/licenses/by-sa/4.0/"></p>

<p style="font-size:14px"> * : hub/notebooks/lab/kernels </p>

<aside class="notes">

</aside>

</section>
<section>

<h3>Agenda</h3>

<ul>
  <li>Introduction</li>
  <li class="fragment">Spawning process</li>
  <li class="fragment">Kernels</li>
  <li class="fragment">Q &amp; A</li>
</ul>

</section>
<section>
<section>

<h3><strong>Introduction</strong></h3>

</section>
<section>

<h2>What is, Why Jupyter?</h2>

<p>The Jupyter Notebook</p>
<blockquote>
  <p>The Jupyter Notebook is an open-source <strong>web application</strong> that allows you to <strong>create</strong> and <strong>share</strong> documents that contain <strong>live code</strong>, equations, <strong>visualizations</strong> … Uses include:  statistical modeling, data visualization, machine learning, and much more.<br>
                                                                               … jupyter.org</p>
</blockquote>

</section>
<section>

<h2>Jupyter Notebook on HPC</h2>

<p>Using Anaconda, anyone can install and run Jupyter Notebooks on their local computer. However, to be able to run Jupyter Notebooks on a remote shared resource like our HPC, one would need to log into the HPC cluster, use the commandline to reserve computing resources and set up some cumbersome SSH tunneling as described here. A more convenient way to run Jupyter Notebooks on a shared resource is using JupyterHub.</p>

</section>
<section>

<div class="row">
  <div class="column">
    <img src="images/preset.png" alt="Iteration" style="width:100%">
  </div>
  <div class="column">
    <ul>
  <li>Need for more <bold>"human-in-the-loop"</bold> workflows due to huge growth in data creation</li>
  <li>Rapid iteration with tools like Jupyter notebooks</li>
  <li>In situ data analytics</li>
  <li>Adaptive scaling of computing resources</li>
</ul>
  </div>
</div>

</section>
<section>

<h2>What we provide</h2>

<ul>
  <li class="fragment">
<strong>Old way</strong>: Single Jupyter notebooks (ssh based)
    <ul>
      <li><a href="https://www.dkrz.de/up/systems/mistral/programming/jupyter-notebook">source</a></li>
      <li>limited support</li>
      <li>commandline based</li>
      <li><code>./start_jupyter [Options]</code></li>
    </ul>
  </li>
  <li class="fragment">
<strong>Convenient way</strong>: <strong>Jupyterhub</strong>
    <ul>
      <li>user-friendly</li>
      <li>full user support</li>
      <li>continuous maintenance and update</li>
    </ul>
  </li>
</ul>

</section>
<section>

<h2>How it works?</h2>

<p><img src="https://github.com/jupyterhub/jupyterhub/blob/3663d7c8fcba2118dd469a8a4cca540cc63a39cf/docs/source/images/jhub-fluxogram.jpeg?raw=true" height="455" width="695" alt="ECAS Architecture"></p>

<p><small><a href="https://jupyterhub.readthedocs.io/en/stable/">https://jupyterhub.readthedocs.io/en/stable/</a></small></p>

</section>
<section>

<h2>How it works on Mistral?</h2>

<p><img src="images/spawning_mistral.png" style="border:none;" alt="Spawning workflow"></p>

</section>
<section>

<h2>Roadmap</h2>

<p><img src="images/roadmap.png" alt=""></p>

</section>
<section>

<h3><strong>What’s new in Jupyterhub 2.0?</strong></h3>

<ul>
  <li>New (DKRZ) Spawner</li>
  <li>Added new partitions</li>
  <li>Added services for announcements and project accounts</li>
  <li>New Sphinx-based documentation</li>
  <li>New frontend</li>
  <li>Different spawner options (preset and advanced)</li>
  <li>Enabled loading own python environments (kernels)</li>
  <li>Enabled jupyter notebook extensions</li>
  <li>…</li>
</ul>

</section>
<section>

<h3>GUI</h3>

<p><img src="images/gui.png" alt="" style="border:none;" height="555" width="850"></p>

</section>
<section>

<h3>REST Web services</h3>
<p><img src="images/services.png" style="border:none;" width="200"></p>

<ul>
  <li>announcements <br>
<img src="images/announcement.png" style="border:none;" width="500">
</li>
  <li>accounts<br>
<img src="images/accounts.png" style="border:none;" width="400">
</li>
</ul>

</section>
<section>

<h3>Documentation</h3>

<p><img src="images/doc.png" alt="" width="870px" height="520px" style="float:center; border:none"></p>

</section>
</section>

<section>
<section>

<h1>Spawner options</h1>

</section>
<section>

<h3>Overview</h3>

</section>
<section>

<h3>Preset options form</h3>

<p><img src="images/preset.png" alt="" width="400px" style="border:none"></p>

<table>
  <tbody>
    <tr>
      <td><small>shared partition; 1,2 or 4 cores (2.5 GByte memory per core) </small></td>
      <td><small> small development/testing projects </small></td>
    </tr>
    <tr>
      <td><small> prepost partition; 1,2 or 4 cores (2.5 GByte memory per core) </small></td>
      <td><small> as before, but allowing access outside of mistral (wget or similar) </small></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

</section>
<section>

<h3>Advanced options form</h3>

<p><img src="images/advanced.png" alt="advanced" width="550" style="border:none"></p>

</section>
<section>

<h3>Named servers</h3>

<table>
  <tbody>
    <tr>
      <td><img src="images/named_servers.gif" alt="" width="1700px" style="border:none"></td>
      <td>
<code>* Named servers allow you to have more than one server running in the same time</code><br><code>* skype</code>
</td>
    </tr>
  </tbody>
</table>

</section>
</section>

<section>
<section>

<h1>Kernels</h1>

</section>
<section>

<h2>Default system kernels</h2>

<table>
  <thead>
    <tr>
      <th>Kernel</th>
      <th>Source module</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Python 2</td>
      <td>python/2.7.12</td>
    </tr>
    <tr>
      <td>Python 2</td>
      <td>anaconda2/bleeding_edge</td>
    </tr>
    <tr>
      <td>Python 3</td>
      <td>anaconda3/bleeding_edge</td>
    </tr>
    <tr>
      <td><span style="color:blue"><em>Python 3 unstable</em></span></td>
      <td><span style="color:blue"><em>python3/unstable</em></span></td>
    </tr>
  </tbody>
</table>

</section>
<section>

<h2>Bring your own environment</h2>

<ul>
  <li>Conda
    <pre><code>
% mkdir $HOME/kernels
% conda create --prefix $HOME/kernels/your-kernel ipykernel python=3.x
% source activate $HOME/kernels/your-kernel
% python -m ipykernel install --user --name new-kernel --display-name="new kernel"
% conda deactivate 
</code></pre>
  </li>
  <li>Virtualenv
    <pre><code>% python -m pip install --user virtualenv
% python -m virtualenv --system-site-packages /path/to/new-kernel
% source /path/to/new-kernel/bin/activate
% pip install ipykernel
% python -m ipykernel install --user --name new-kernel --display-name="new-kernel"
</code></pre>
  </li>
</ul>

</section>
<section>

<h2>Using/Changing the kernels</h2>

<p><img src="images/lab_kernels.png" alt="" width="1000px" style="border:none"></p>

</section>
<section>

<h2>Using/Changing the kernels</h2>

<p><img src="images/change_kernel_jupyter.png" alt="" width="730px" style="border:none"></p>

</section>
</section>

<section>
<section>

<h2>Jupyter extensions (1)</h2>

<p><img src="images/nbextensions.png" alt="" style="border:none"></p>

<aside class="notes">

<p>jupyter notebooks are kind of add-ons to extend the basic environment of a jupyter notebook.</p>

</aside>

</section>
<section>

<h2>Jupyter extensions (2)</h2>

<p><img src="images/mask-ml.gif" alt="Dask Labextension" width="850px" height="400px" style="border:none"></p>

</section>
</section>

<section>
<section>

<h2>Future work</h2>

<ul>
  <li>Sharing solutions
    <ul>
      <li>shared notebooks repositories (Git/hub/lab)</li>
      <li>external sharing services: Cloud (?)</li>
    </ul>
  </li>
  <li>Enhanced spawning queue for Jupyterhub</li>
  <li>More dedicated system kernels and extensions (e.g. ML)</li>
  <li>Speed up loading Python packages</li>
  <li>Binder for Mistral</li>
</ul>

</section>
<section>

<h2>Feedback? Questions?</h2>

<ul>
  <li><a href="https://jupyterhub.dkrz.de">Jupyterhub</a></li>
  <li><a href="https://jupyterhub.gitlab-pages.dkrz.de/jupyterhub-docs/index.html">Documentation</a></li>
  <li>support@dkrz.de</li>
</ul>

</section>
</section>

  </div>
</div>

<script src="reveal.js/js/reveal.js" type="module"></script>


<script>
  (function() {
  function extend( a, b ) {
    for(var i in b) {
      a[i] = b[i];
    }
  }
  var baseOptions = {
    transition: 'no',
    hash: true,
    dependencies: [
      { src: 'plugin/markdown/marked.js' },
      { src: 'plugin/markdown/markdown.js' },
      { src: 'plugin/highlight/highlight.js' },
      { src: 'plugin/notes/notes.js', async: true }
    ]
  };


  var configOptions = {"width":1200,"margin":0.1,"minScale":0.2,"maxScale":1.5,"slideNumber":false,"showNotes":false,"display":"block","parallaxBackgroundImage":"images/Poster_quer_Hintergrund.jpg","parallaxBackgroundSize":"100% 100%","parallaxBackgroundHorizontal":0,"parallaxBackgroundVertical":0}
  var initializeOptions = {};
  extend(initializeOptions, baseOptions);
  extend(initializeOptions, configOptions);
  Reveal.initialize(initializeOptions);
})();

</script>

  </body>
</html>
